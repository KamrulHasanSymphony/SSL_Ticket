@model SSL.CS.SSL.Common.Models.LoginResource
@{
    Layout = "";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewData["Title"] - SageERP</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="~/css/fonts.googleapis.com_css_family=Source+Sans.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/AdminLte/plugins/fontawesome-free/css/all.min.css">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="/AdminLte/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/AdminLte/dist/css/adminlte.min.css">
    <link rel="stylesheet" href="~/css/site.css">
</head>

<style type="text/css">
    body {
        font-family: Arial;
        font-size: 10pt;
    }

    .error {
        color: red;
    }

    .spacer4 {
        height: 8px;
    }
</style>

<body class="hold-transition login-page">
    <div class="login-box">
        <!-- /.login-logo -->
        <div class="card">
            <div class="card-header text-center">
                <a href="https://www.symphonysofttech.com/" target="_blank">
                    <img class="flex-item" src="~/assets/img/symphonyLogo.png" style="width:243px;" />
                </a>
            </div>
            <div class="card-body login-card-body">
                <p class="login-box-msg">Sign in to start your session</p>

                @using (Html.BeginForm("Index", "Login", new { }, FormMethod.Post))
                {
                    @Html.ValidationSummary(true)

                    @Html.HiddenFor(model => model.returnUrl)

                    <div class="input-group mb-3">

                        @Html.TextBoxFor(model => model.UserName, new { @class = "form-control", @placeholder = "User Name " })

                        <div class="input-group-prepend">
                            <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        @Html.ValidationMessageFor(model => model.UserName)
                    </div>
                    <div class="input-group mb-3">
                        @Html.TextBoxFor(model => model.Password, new { @class = "form-control", type = "password", @placeholder = "Password " })
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <i class="fas fa-key"></i>
                            </span>
                        </div>

                    </div>
                    <div class="input-group mb-3">
                        @Html.ValidationMessageFor(model => model.Password)
                    </div>

                    <div class="input-group mb-3">
                        <select id="CompanyName" name="CompanyName" class="form-control">
                            @foreach (var item in Model.CompanyInfos)
                            {
                                <option value="@item.CompanyDataBase">@item.CompanyName</option>
                            }
                        </select>
                        <div class="input-group-append">
                            <span class="input-group-text">
                                <i class="fas fa-building"></i>
                            </span>
                        </div>
                    </div>

                    @Html.ValidationMessageFor(model => model.Message)


                    <div class="row">
                        <div class="col-md-2">
                        </div>
                        <div class="col-4">
                            <button type="submit" class="btn btn-primary btn-block">Sign In</button>
                        </div>
                        <!-- /.col -->
                        <div class="col-4">
                            <button type="button" class="btn btn-secondary btn-block" onclick="window.location.href='@Url.Action("LoginCreate", "UserProfile")'">Sign Up</button>
                      </div>
                        <div class="col-md-2">
                        </div>
                        <!-- /.col -->
                    </div>
                    <div class="spacer4"></div>
                    <div class="row">
                        <div class="col-md-12">
                            <a class="login-box-msg" style="text-decoration: underline;margin-left:50px;" href='@Url.Action("Forget", "UserProfile")'>Forgot Password? Click here</a>
                            </div>
                    </div>
                }



            </div>
            <!-- /.login-card-body -->
        </div>
    </div>

    <!-- /.login-box -->
    <!-- jQuery -->

    <style>
        .logo {
            width: 150px;
            height: auto;
        }
    </style>
    <script src="/AdminLte/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="/AdminLte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="/AdminLte/dist/js/adminlte.min.js"></script>
    <script src="/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <script>

        $(document).ready(function () {

            //
            clearAllCookies();
            clearCookie("cookieName");
            clearJQueryCache();
            clearSessionStorage();
            clearLocalStorage();
            clearCacheStorage();
            // clearIndexedDB();


            function clearAllCookies() {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i];
                    var eqPos = cookie.indexOf('=');
                    var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
                    document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
                }
            };

            function clearCookie(cookieName) {
                document.cookie = cookieName + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                $.cookie('cookieName', 'cookieValue', { hasVersion: false });
                $.removeCookie(cookieName);

                $.each($.cookie(), function (key, value) {
                    $.removeCookie(key);
                });
            };

            function clearJQueryCache() {
                $.ajaxSetup({ cache: false });
            };

            function clearSessionStorage() {
                sessionStorage.clear();
            };

            function clearLocalStorage() {
                localStorage.clear();
            };

            function clearCacheStorage() {
                if ('caches' in window) {
                    caches.keys().then(function (cacheNames) {
                        cacheNames.forEach(function (cacheName) {
                            caches.delete(cacheName);
                        });
                    });
                }
            };

            function clearIndexedDB() {
                var request = window.indexedDB.open("SageRDRS");
                request.onsuccess = function (event) {
                    var db = event.target.result;
                    var objectStoreNames = db.objectStoreNames;
                    for (var i = 0; i < objectStoreNames.length; i++) {
                        db.deleteObjectStore(objectStoreNames[i]);
                    }
                };
            };


        });

    </script>


</body>
</html>






